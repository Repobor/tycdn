import{u as k}from"./vue-router.f1a6a0d1.js";import{O as x}from"./orders.19828111.js";import{S as y}from"./schedules.d77a803f.js";import{T as A,_ as B}from"./index.df009344.js";import{D,r as v,c as l,a as s,M as d,a4 as _,L as C,U as i,o,O as b,ap as S,aq as w}from"./@vue.a9411cd4.js";import"./crypto-js.a1ce743c.js";import"./clone-deep.292945d4.js";import"./shallow-clone.95d3ae69.js";import"./kind-of.db8547f8.js";import"./is-plain-object.c8a6e606.js";import"./isobject.b90498ab.js";import"./dayjs.ba0a1193.js";import"./pinia.27fdb009.js";import"./vue-demi.237d1bfa.js";import"./vue3-lazyload.76288b1e.js";import"./nprogress.f46f69d2.js";import"./axios.3a678d80.js";import"./form-data.18640493.js";import"./element-plus.254419c7.js";import"./@element-plus.d7dd3bba.js";import"./lodash-es.f14d6700.js";import"./@vueuse.8f037a30.js";import"./async-validator.ca741037.js";import"./@sxzz.30ebe6b1.js";import"./escape-html.10c6516a.js";import"./normalize-wheel-es.65bdcd5b.js";import"./@ctrl.70544517.js";import"./theme-change.990675dd.js";const f=c=>(S("data-v-3164683d"),c=c(),w(),c),I=f(()=>s("div",{class:"justify-center flex alert shadow-lg mb-8 select-none font-light"}," \u94F6\u5E55 ",-1)),L={class:"justify-center flex flex-row select-none h-fit"},O={id:"seat_left"},N={class:"flex flex-col mr-2"},T={id:"seat_list"},V=["onClick"],$={id:"info",class:"text-center"},q=f(()=>s("span",null,"\u5EA7\u4F4D :",-1)),z={key:0,class:"inline-block"},M=D({__name:"Seats",props:{scheduleid:null},setup(c){const m=c,F=k(),u=v(),t=v([]);function E(r,p,e){const a=r.target;if(u.value?.hall_seat?.at(p-1)?.at(e-1)===1){if(t.value.length>=4&&!a.classList.contains("seat-checked")){A.error("\u6BCF\u4EBA\u6BCF\u6B21\u53EA\u80FD\u540C\u65F6\u8D2D\u4E704\u4E2A\u5EA7\u4F4D");return}if(a.classList.contains("seat-checked")){a.classList.remove("seat-checked");for(let n=0;n<t.value.length;n++){const h=t.value[n];h[0]===p-1&&h[1]===e-1&&t.value.splice(n,1)}}else a.classList.add("seat-checked"),t.value.push([p-1,e-1]),t.value.sort()}}y.getById(m.scheduleid).then(({data:r})=>{u.value=r});function g(){x.add({schedule_id:m.scheduleid,seat:t.value,sign:""}).then(({data:r})=>{F.push({name:"confirm_pay",params:{orderid:r.id}})})}return(r,p)=>(o(),l(d,null,[I,s("div",L,[s("div",O,[s("ul",N,[(o(!0),l(d,null,_(u.value?.hall_seat_row,e=>(o(),l("li",{key:e,class:"badge badge-sm badge-info p-0 w-7 h-7"},i(e),1))),128))])]),s("div",T,[s("table",null,[s("tbody",null,[(o(!0),l(d,null,_(u.value?.hall_seat_row,e=>(o(),l("tr",{key:e},[(o(!0),l(d,null,_(u.value?.hall_seat_col,a=>(o(),l("td",{key:a,class:b(["p-0 w-7 h-7",[{"seat-cell":u.value?.hall_seat?.at(e-1)?.at(a-1)===1,"seat-sold":u.value?.hall_seat?.at(e-1)?.at(a-1)!==1}]]),onClick:n=>E(n,e,a)}," \xA0 ",10,V))),128))]))),128))])])])]),s("div",$,[q,t.value.length>0?(o(),l("div",z,[(o(!0),l(d,null,_(t.value,(e,a)=>(o(),l("span",{key:a},i(` ${e[0].valueOf()+1}\u6392${e[1].valueOf()+1}\u5EA7 `),1))),128))])):C("",!0),s("div",null,"\u5DF2\u9009\u62E9 "+i(t.value.length)+" \u4E2A\u5EA7\u4F4D\uFF0C\u518D\u6B21\u70B9\u51FB\u5EA7\u4F4D\u53EF\u4EE5\u53D6\u6D88",1),s("div",null,"\u4EF7\u683C\uFF1A\xA5"+i(u.value?.price)+" x "+i(t.value.length)+" = "+i(u.value?.price*t.value.length),1)]),s("button",{class:"btn btn-primary float-right",onClick:g}," \u786E\u8BA4\u4FE1\u606F\uFF0C\u4E0B\u5355 ")],64))}});const he=B(M,[["__scopeId","data-v-3164683d"]]);export{he as default};
